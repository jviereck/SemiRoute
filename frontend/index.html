<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SemiRouter - PCB Viewer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <h1>SemiRouter</h1>

            <section class="panel" id="trace-mode-panel">
                <h2>Trace Mode</h2>
                <button id="trace-mode-toggle">Enable Trace Mode</button>
                <div id="trace-options" class="hidden">
                    <label>Layer:
                        <select id="trace-layer">
                            <option value="F.Cu">F.Cu (Front)</option>
                            <option value="B.Cu">B.Cu (Back)</option>
                            <option value="In1.Cu">In1.Cu</option>
                            <option value="In2.Cu">In2.Cu</option>
                        </select>
                    </label>
                    <label>Width:
                        <input type="number" id="trace-width" value="0.25" step="0.05" min="0.1"> mm
                    </label>
                    <div id="trace-status">Click a pad to start</div>
                    <div id="trace-error" class="hidden"></div>
                    <div id="trace-actions" class="hidden">
                        <button id="trace-confirm">Confirm</button>
                        <button id="trace-cancel">Cancel</button>
                    </div>
                </div>
            </section>

            <section class="panel" id="routes-panel">
                <h2>Routes <span id="route-count">(0)</span></h2>
                <div id="routes-list" class="routes-list">
                    <p class="hint">No routes yet</p>
                </div>
                <div class="routes-actions">
                    <button id="download-pcb" class="small-btn">Download PCB</button>
                    <button id="clear-all-routes" class="small-btn" disabled>Clear All</button>
                </div>
            </section>

            <!-- Download dialog modal -->
            <div id="download-dialog" class="modal hidden">
                <div class="modal-content">
                    <h3>Export PCB</h3>
                    <label>
                        Filename:
                        <input type="text" id="download-filename" value="modified.kicad_pcb" />
                    </label>
                    <div class="modal-actions">
                        <button id="download-confirm" class="confirm-btn">Download</button>
                        <button id="download-cancel" class="cancel-btn">Cancel</button>
                    </div>
                </div>
            </div>

            <section class="panel">
                <h2>Layers</h2>
                <div id="layer-controls">
                    <div class="layer-group">
                        <div class="layer-group-title">Copper</div>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="F.Cu" checked>
                            <span class="layer-color" style="background: #C83232"></span>
                            F.Cu (Front)
                        </label>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="B.Cu" checked>
                            <span class="layer-color" style="background: #3232C8"></span>
                            B.Cu (Back)
                        </label>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="In1.Cu" checked>
                            <span class="layer-color" style="background: #C8C832"></span>
                            In1.Cu (Inner 1)
                        </label>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="In2.Cu" checked>
                            <span class="layer-color" style="background: #32C8C8"></span>
                            In2.Cu (Inner 2)
                        </label>
                    </div>
                    <div class="layer-group">
                        <div class="layer-group-title">Silkscreen</div>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="F.SilkS" checked>
                            <span class="layer-color" style="background: #F0F0F0"></span>
                            F.SilkS (Front)
                        </label>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="B.SilkS" checked>
                            <span class="layer-color" style="background: #F0F0F0"></span>
                            B.SilkS (Back)
                        </label>
                    </div>
                    <div class="layer-group">
                        <div class="layer-group-title">Other</div>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="Edge.Cuts" checked>
                            <span class="layer-color" style="background: #C8C832"></span>
                            Edge.Cuts (Outline)
                        </label>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="F.CrtYd">
                            <span class="layer-color" style="background: #FF26E2"></span>
                            F.CrtYd (Courtyard)
                        </label>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="F.Fab">
                            <span class="layer-color" style="background: #AFAFAF"></span>
                            F.Fab (Fabrication)
                        </label>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="Labels">
                            <span class="layer-color" style="background: #FFFF00"></span>
                            Labels
                        </label>
                        <label class="layer-toggle">
                            <input type="checkbox" data-layer="Clearance">
                            <span class="layer-color" style="background: #FF6600"></span>
                            Clearance
                        </label>
                    </div>
                </div>
            </section>

            <section class="panel">
                <h2>Board Info</h2>
                <div id="board-info">
                    <p>Loading...</p>
                </div>
            </section>

            <section class="panel">
                <h2>Selection</h2>
                <div id="selection-info">
                    <p class="hint">Click a pad to see its net</p>
                </div>
            </section>

            <section class="panel">
                <h2>Controls</h2>
                <ul class="controls-list">
                    <li><kbd>Scroll</kbd> Zoom</li>
                    <li><kbd>Shift+Drag</kbd> Pan</li>
                    <li><kbd>Click</kbd> Select / Commit trace</li>
                    <li><kbd>Shift+Click</kbd> Multi-select segments</li>
                    <li><kbd>Dbl-click</kbd> Select route / Finish</li>
                    <li><kbd>Backspace</kbd> Delete selected</li>
                    <li><kbd>Esc</kbd> Cancel / Clear selection</li>
                    <li><kbd>R</kbd> Reset view</li>
                    <li><kbd>T</kbd> Toggle trace mode</li>
                    <li><kbd>1-4</kbd> Via + switch layer</li>
                </ul>
            </section>

        </aside>

        <main class="viewer">
            <div id="svg-container"></div>
            <div id="zoom-controls">
                <button id="zoom-in" title="Zoom In">+</button>
                <button id="zoom-out" title="Zoom Out">âˆ’</button>
            </div>
        </main>
    </div>

    <script src="js/svg-viewer.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
